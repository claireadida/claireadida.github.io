<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Articles - Claire L. Adida</title>
    <style>
        body {
            font-family: Georgia, 'Times New Roman', serif;
            line-height: 1.6;
            color: #333;
            background-color: #fff;
            margin: 0;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        h1 {
            font-size: 2em;
            font-weight: normal;
            margin: 0 0 20px 0;
            padding-bottom: 15px;
            border-bottom: 2px solid #333;
        }
        
        nav {
            margin: 20px 0 40px 0;
        }
        
        nav a {
            color: #333;
            text-decoration: none;
            margin-right: 15px;
            font-size: 1em;
        }
        
        nav a:hover {
            color: #8B0000;
            text-decoration: underline;
        }
        
        h2 {
            font-size: 1.3em;
            font-weight: bold;
            margin: 40px 0 20px 0;
            padding-top: 20px;
            border-top: 1px solid #ccc;
        }
        
        h2:first-of-type {
            border-top: none;
            padding-top: 0;
        }
        
        .publication {
            margin-bottom: 25px;
            line-height: 1.7;
        }
        
        .publication a {
            color: #8B0000;
            text-decoration: none;
        }
        
        .publication a:hover {
            text-decoration: underline;
        }
        
        .loading {
            padding: 40px 0;
            color: #666;
        }
        
        footer {
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            text-align: center;
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Claire L. Adida</h1>
        
        <nav>
            <a href="index.html">Home</a> |
            <a href="cv.pdf">CV</a> |
            <a href="articles.html">Articles</a> |
            <a href="books.html">Books</a> |
            <a href="teaching.html">Teaching</a> |
            <a href="https://scholar.google.com/citations?user=Yf5lW8oAAAAJ&hl=en&authuser=1" target="_blank">Google Scholar</a>
        </nav>
        
        <div id="publications" class="loading">Loading publications...</div>
        
        <footer>
            <p>&copy; 2026 Claire L. Adida</p>
        </footer>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <script>
        const CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTG8TtO6ceiZYswhG21Y7AUm9QMtVy_QROe_iMZ6DfWRZ-VbHw62WnOKRcfMX7iQfNRqR_BGyxRDAtl/pub?output=csv';
        
        Papa.parse(CSV_URL, {
            download: true,
            header: true,
            complete: function(results) {
                displayPublications(results.data);
            },
            error: function(error) {
                document.getElementById('publications').innerHTML = '<p>Error loading publications. Please try again later.</p>';
                console.error('Error loading CSV:', error);
            }
        });
        
        function displayPublications(data) {
            const container = document.getElementById('publications');
            container.innerHTML = '';
            
            const groupedByYear = {};
            const inProcessStatuses = ['In review', 'In preparation', 'Revise and Resubmit'];
            
            data.forEach(row => {
                if (!row.Year || !row.Title) return;
                
                let year = row.Year.trim();
                
                if (inProcessStatuses.includes(year)) {
                    year = 'In review process';
                }
                
                if (!groupedByYear[year]) {
                    groupedByYear[year] = [];
                }
                groupedByYear[year].push(row);
            });
            
            const yearOrder = ['In review process'];
            const numericYears = Object.keys(groupedByYear)
                .filter(y => !yearOrder.includes(y))
                .sort((a, b) => {
                    const aNum = parseInt(a);
                    const bNum = parseInt(b);
                    if (isNaN(aNum) && isNaN(bNum)) return 0;
                    if (isNaN(aNum)) return 1;
                    if (isNaN(bNum)) return -1;
                    return bNum - aNum;
                });
            
            const finalOrder = [...yearOrder, ...numericYears];
            
            finalOrder.forEach(year => {
                if (!groupedByYear[year]) return;
                
                const heading = document.createElement('h2');
                heading.textContent = year;
                container.appendChild(heading);
                
                groupedByYear[year].forEach(pub => {
                    const pubDiv = document.createElement('div');
                    pubDiv.className = 'publication';
                    
                    let html = pub.Title;
                    if (pub.Authors && pub.Authors.trim()) {
                        html += '<br>' + pub.Authors;
                    }
                    if (pub.Journal && pub.Journal.trim()) {
                        html += '<br><em>' + pub.Journal + '</em>';
                        if (pub.Volume && pub.Volume.trim()) {
                            html += ' ' + pub.Volume;
                        }
                        html += '.';
                    }
                    if (pub.Notes && pub.Notes.trim()) {
                        html += '<br>' + pub.Notes;
                    }
                    
                    const links = [];
                    if (pub.Paper_Link && pub.Paper_Link.trim()) {
                        links.push(`<a href="${pub.Paper_Link}" target="_blank">[paper]</a>`);
                    }
                    if (pub.Other_Links && pub.Other_Links.trim()) {
                        const otherLinks = pub.Other_Links.split('|').map(link => {
                            const match = link.match(/\[([^\]]+)\]\(([^)]+)\)/);
                            if (match) {
                                return `<a href="${match[2]}" target="_blank">[${match[1]}]</a>`;
                            }
                            return link;
                        });
                        links.push(...otherLinks);
                    }
                    
                    if (links.length > 0) {
                        html += '<br>' + links.join(' ');
                    }
                    
                    pubDiv.innerHTML = html;
                    container.appendChild(pubDiv);
                });
            });
        }
    </script>
</body>
</html>
